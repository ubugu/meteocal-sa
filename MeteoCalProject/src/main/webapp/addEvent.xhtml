<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:jsf="http://xmlns.jcp.org/jsf"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <head jsf:id="head">     
        <title>Home</title>
        <link href="css/meteocal.css" rel="stylesheet" type="text/css"/>
    </head>
    <body jsf:id="body" class="noFrame">   
        <!--Element of the first line on the top bar-->
        <div id="topHeader">
             <img id="logo" src="Images/meteocalsnow.png"  name="meteocalLogo" title="meteocallogo"/>

                <h2 id="userCalendar">#{loginBean.loggedUser.username}'s Calendar</h2>   
              
            <div class="logoutForm">         
                <h:form>
                    <p:commandButton value="Logout" action="#{loginBean.logout()}"/>                     
                </h:form>
            </div>
        </div>
        
        <div id="LeftHeader">
            <ul class="buttonList">
                <h:form>
                    <li><p:commandButton class="leftBarButton"  value="Home" action="#{scheduleController.loadOwnCalendar()}"/></li>   
                    <li><p:commandButton class="leftBarButton"  value="AddEvent" action="#{EventController.newEvent}"/></li>   
                    <li><p:button class="leftBarButton"  value="Notifications" outcome="notifications"/></li>   
                    <li><p:button class="leftBarButton"  value="Settings" outcome="settings"/> </li> 
                </h:form>
            </ul>

        </div>
         
        <!-- Common Header -->
        
            <h:form id="Event">
              <p:messages autoUpdate="true"/>
                <div id="eventForm">

                    <h1> Event Creation</h1>

                    <h:panelGrid columns="3"> 
                        <p:outputLabel for="title" value="Title:"/>
                        <p:inputText id="title" value="#{EventController.event.title}" required="true" requiredMessage="The title is required." />
                        <p:message for="title" />
                        
                        <p:outputLabel for="location" value="Location" />          
                        <p:inputText id="location" value="#{EventController.event.location}" required="true" requiredMessage="The location is required." />
                        <p:message for="location" />
                        
                        <p:outputLabel for="city" value="City:"/>
                        <p:inputText id="city" value="#{EventController.event.city}"/>
                        <p:message for="city" />
                        
                        <p:outputLabel for="startingDate" value="Starting Date:" />
                        <p:calendar id="startingDate" value="#{EventController.event.date}" locale="it" navigator="true" pattern="dd-MM-yyyy" required="true" requiredMessage="The Starting Date is required."/>
                        <p:message for="startingDate" />
                        
                        <p:outputLabel for="endingDate" value="Ending Date:" />
                        <p:calendar id="endingDate" value="#{EventController.endate}" locale="it" navigator="true" pattern="dd-MM-yyyy" required="true" requiredMessage="The Ending Date is required." />
                        <p:message for="endingDate" />
                        
                        <p:outputLabel for="startingTime" value="Starting Time:" />
                        <p:calendar id="startingTime" value="#{EventController.event.startingTime}" pattern="HH:mm a" timeOnly="true" required="true" requiredMessage="The Starting Time is required." />
                        <p:message for="startingTime" />
                        
                        <p:outputLabel for="endingTime" value="Ending Time:" />
                        <p:calendar id="endingTime" value="#{EventController.event.endingTime}" pattern="HH:mm a" timeOnly="true" required="true" requiredMessage="The Ending Time is required." />
                        <p:message for="endingTime" />
                        
                        <p:outputLabel for="repeat" value="Repeat Type:"/>
                        <p:selectOneMenu id="repeat" value="#{EventController.repeats}" style="width:125px" >
                            <f:selectItem itemLabel="No" itemValue="no" />
                            <f:selectItem itemLabel="EveryDay" itemValue="everyday" />
                            <f:selectItem itemLabel="EveryWeek" itemValue="everyweek" />
                            <f:selectItem itemLabel="EveryMonth" itemValue="everymonth" />
                            <f:selectItem itemLabel="EveryYear" itemValue="everyyear" />
                        </p:selectOneMenu>
                        <p:message for="repeat" />
                        
                        <p:outputLabel for="untillDate" value="Untill:" />
                        <p:calendar id="untillDate" value="#{EventController.untillDate}" locale="it" navigator="true" pattern="dd-MM-yyyy" />
                        <p:message for="untillDate" />
                        
                        <p:outputLabel for="description" value="Description (optional):"/>
                        <p:inputTextarea id="description" autoResize="false" rows="6" cols="28" value="#{EventController.event.description}" />
                        <p:message for="description" />
                        
                    </h:panelGrid>
                  
                </div>    
                <div id="rightEventForm">
                    
                    <br />                    
                    <div id="badConditions"> 
                        <p:outputLabel for="bad" value="Bad Conditions:  "/>
                        <p:inputSwitch id="bad" value="#{EventController.bad}" >
                            <p:ajax update="badConditionsDiv" />
                        </p:inputSwitch>
                        <p:message for="bad" />
                    </div>
               
                    <br />
                    
                    <p:panel  style="width:450px;border:none;" id="badConditionsDiv" visible="#{EventController.bad}">
                            
                        <!-- bad weather layer -->
                    
                        <h:panelGrid cellpadding="10px" width="450px" columns="2">
                    
                            <p:outputLabel for="layer" value="Layer Type:"/>
                            <p:selectOneMenu id="layer" value="#{EventController.badconditions.layer}" style="width:100px">
                                <f:selectItem itemLabel="Rainy" itemValue="rainy" />
                                <f:selectItem itemLabel="Cloudy" itemValue="cloudy" />
                                <f:selectItem itemLabel="Snowy" itemValue="snowy" />
                            </p:selectOneMenu>
                            <p:message for="layer" />
                            
                        </h:panelGrid>
                        
                            <!-- bad weather advance setting -->
                        
                        <h:panelGrid cellpadding="10px" width="450px" columns="6">
                        
                            <p:selectBooleanCheckbox id="temperaturecheck" value="#{EventController.temp}"/>
                            <h:outputText value="Temperature"/>
                            <h:outputText id="temperatureoutput" value="C #{EventController.badconditions.temperature}" />
                            <h:inputHidden id="temperature" value="#{EventController.badconditions.temperature}" />
                            <h:outputText id="Clabel" value="C" />
                            <p:slider for="temperature" display="temperatureoutput" minValue="-20" maxValue="50" style="width: 150px" displayTemplate="{value}" />
                            
                            <p:selectBooleanCheckbox id="precipitationscheck" value="#{EventController.prec}"/>
                            <h:outputText value="Precipitations"/>
                            <h:outputText id="precipitationsoutput" value="% #{EventController.badconditions.precipitations}" />
                            <h:inputHidden id="precipitations" value="#{EventController.badconditions.precipitations}" />
                            <h:outputText id="Plabel" value="%" />
                            <p:slider  for="precipitations" display="precipitationsoutput" style="width: 150px"  displayTemplate="{value}" />
    
                        </h:panelGrid>
                        
                    </p:panel>
                    <br />
                    <br />
                    
                
                    <h:panelGrid cellpadding="10px" width="450px" columns="4"> 
                        <p:selectBooleanCheckbox id="invitationcheck" value="#{EventController.inviteSelect}"/>     
                        <h:outputText value="Send an Invitation to: "/>
                        <p:ajax event="click" update="invitation"/>                      
                        <p:inputTextarea id="invitation" disabled="#{!EventController.inviteSelect}" autoResize="false" rows="4" cols="28" value="#{EventController.invitations}"/>
                    </h:panelGrid> 
                   
                    <h:panelGrid cellpadding="10px" width="450px" columns="6"> 
                        
                        <h:outputText value="Event Color:"/>
                        <p:selectOneMenu id="color" value="#{EventController.event.color}" style="width:100px">
                            <f:selectItem itemLabel="Grey" itemValue="grey" />
                            <f:selectItem itemLabel="Red" itemValue="red" />
                            <f:selectItem itemLabel="Pink" itemValue="pink" />
                            <f:selectItem itemLabel="Blue" itemValue="blue" />
                            <f:selectItem itemLabel="Green" itemValue="green" />
                        </p:selectOneMenu>
                        <p:message for="color" />

                        <h:outputText value="Set Event Privacy:"/>
                        <p:selectOneMenu id="privacy" value="#{EventController.event.privacy}" style="width:100px">
                            <f:selectItem itemLabel="Private" itemValue="private" />
                            <f:selectItem itemLabel="Public" itemValue="public" />
                        </p:selectOneMenu>
                        <p:message for="privacy" />

                    </h:panelGrid>
              
                    <p:commandButton value="Create Event" ajax="true" validateClient="true" action="#{EventController.controlDataCreation()}" id="iconOnly" icon="ui-icon-calendar"/>
                    <p:dialog widgetVar="complete" header="Success">
                        Event Created!
                    </p:dialog>
                    
                </div> 
                
                <!-- dialog error -->
                
                <p:dialog header="Error" widgetVar="NoPast Error" minHeight="40" resizable="false" >
                <h:outputText value="The Starting Date is before Today" />
                </p:dialog>
                
                <p:dialog header="Error" widgetVar="EndDate Error" minHeight="40" resizable="false" >
                <h:outputText value="The ending date is before the starting date" />
                </p:dialog>
           
                <p:dialog header="Error" widgetVar="EndTime Error" minHeight="40" resizable="false" >
                <h:outputText value="The ending time is before the starting time" />
                </p:dialog>
                
                <p:dialog header="Error" widgetVar="EndUntillDate Error" minHeight="40" resizable="false" >
                <h:outputText value="The untill date is before the starting date" />
                </p:dialog>
           
                <p:dialog header="Error" widgetVar="Repeat Error" minHeight="40" resizable="false" >
                <h:outputText value="You can not repeat an event that last more than 1 day for now" />
                </p:dialog>
                
                <p:dialog header="Error" widgetVar="Invite Error" minHeight="40" resizable="false" dynamic="true">
                <h:outputText value="You haven't insert any User or these Users does not exist: #{EventController.rejectedUsers}" />
                </p:dialog>
                
                <p:dialog header="Error" widgetVar="StartTime Error" minHeight="40" resizable="false" >
                <h:outputText value="The Starting Time is before the current Time!" />
                </p:dialog>
                
                <p:dialog header="Error" widgetVar="DateInTheMiddle Error" minHeight="40" resizable="false" >
                <h:outputText value="There are some event in the middle of the one you want to create!!" />
                </p:dialog>
              
                <p:dialog header="Error" widgetVar="Untill Error" minHeight="40" resizable="false" >
                <h:outputText value="Repeats is not 'no' but you did not chose an untill date !!" />
                </p:dialog>
                
                <p:dialog header="Error" widgetVar="DateInTheMiddleRepeat Error" minHeight="40" resizable="false" >
                <h:outputText value="There are some event in the middle of one of the events you want to create!!" />
                </p:dialog>
                
                
                <p:dialog header="Info" widgetVar="weather" minHeight="40" resizable="false" >
                <h:outputText value="The weather was not inserted for one or more of the events created" />
                </p:dialog>
                <!-- dialog error -->
                
            </h:form>
        
            <!--Function to show element on click-->
            <script type="text/javascript" language="javascript">
                function show(id){
                  if (document.getElementById){
                    if(document.getElementById(id).style.display === 'none'){
                      document.getElementById(id).style.display = 'block';
                    }else{
                      document.getElementById(id).style.display = 'none';
                    }
                  }
                }
            </script>
            
             <!--Function to enable text-->
            <script type="text/javascript" language="javascript">
                
                function enable(id){
                  if (document.getElementById){
                    if(document.getElementById(id).disabled === true){
                      document.getElementById(id).disabled = false;
                    }else{
                      document.getElementById(id).disabled = true;
                    }
                  }
                }
            </script>
         
         
  

        <script language="javascript" type="text/javascript">
            <!--Function to load a page indicated with the string value.-->
            function loadPage(page, target) 
            {
                window.open(page, target);
            }
        </script>
    </body>
</html>
