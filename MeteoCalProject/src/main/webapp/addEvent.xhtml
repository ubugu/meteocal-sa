<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:jsf="http://xmlns.jcp.org/jsf"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <head jsf:id="head">     
        <title>Home</title>

        <script jsf:target="body" jsf:name="story-page.js"/>
        <link jsf:name="styles.css" rel="stylesheet" type="text/css" />
        <link href="css/meteocal.css" rel="stylesheet" type="text/css"/>
    </head>
    <body jsf:id="body" class="noFrame">   
        <!--Element of the first line on the top bar-->
        <div id="topHeader">
             <img id="logo" src="Images/meteocalsnow.png"  name="meteocalLogo" title="meteocallogo"/>

                <h1 id="userCalendar">User Calendar</h1>   
              
            <div class="logoutForm">         
                <div >
                    <p:button value="Logout" outcome="index"/>    
                </div>
            </div>
        </div>
        
        <div id="LeftHeader">
            <ul class="buttonList">
                 <li><p:button class="leftBarButton"  value="Home" outcome="mainUserPage"/></li>   
                 <li><p:button class="leftBarButton"  value="AddEvent" outcome="addEvent"/></li>     
                 <li><p:button class="leftBarButton"  value="Notifications" outcome="notifications"/></li>   
                 <li><p:button class="leftBarButton"  value="Settings" outcome="settings"/> </li>    
            </ul>

        </div>
               
            <h:form id="Event">
                <div id="eventForm">

                    <h1> Event Creation</h1>

                    <!-- copied -->
                    <h:panelGrid columns="3"> 
                        <p:outputLabel for="title" value="Title:"/>
                        <p:inputText id="title" value="#{EventController.event.title}" required="true" requiredMessage="The title is required." />
                        <h:message for="title" />
                        
                        <p:outputLabel for="location" value="Location" />          
                        <p:inputText id="location" value="#{EventController.event.location}" required="true" requiredMessage="The location is required." />
                        <h:message for="location" />
                        
                        <p:outputLabel for="city" value="City:"/>
                        <p:inputText id="city" value="#{EventController.event.city}"/>
                        <h:message for="city" />
                        
                        <p:outputLabel for="startingDate" value="Starting Date:" />
                        <p:calendar id="startingDate" value="#{EventController.event.date}" locale="it" navigator="true" pattern="dd-MM-yyyy" required="true" requiredMessage="The Starting Date is required."/>
                        <h:message for="startingDate" />
                        
                        <p:outputLabel for="endingDate" value="Ending Date:" />
                        <p:calendar id="endingDate" value="#{EventController.endate}" locale="it" navigator="true" pattern="dd-MM-yyyy" required="true" requiredMessage="The Ending Date is required." />
                        <h:message for="endingDate" />
                        
                        <p:outputLabel for="startingTime" value="Starting Time:" />
                        <p:calendar id="startingTime" value="#{EventController.event.startingTime}" pattern="HH:mm a" timeOnly="true" required="true" requiredMessage="The Starting Time is required." />
                        <h:message for="startingTime" />
                        
                        <p:outputLabel for="endingTime" value="Ending Time:" />
                        <p:calendar id="endingTime" value="#{EventController.event.endingTime}" pattern="HH:mm a" timeOnly="true" required="true" requiredMessage="The Ending Time is required." />
                        <h:message for="endingTime" />
                        
                        <p:outputLabel for="repeat" value="Repeat Type:"/>
                        <p:selectOneMenu id="repeat" value="#{EventController.repeats}" style="width:125px" >
                            <f:selectItem itemLabel="No" itemValue="no" />
                            <f:selectItem itemLabel="EveryDay" itemValue="everyday" />
                            <f:selectItem itemLabel="EveryWeek" itemValue="everyweek" />
                            <f:selectItem itemLabel="EveryMonth" itemValue="everymonth" />
                            <f:selectItem itemLabel="EveryYear" itemValue="everyyear" />
                        </p:selectOneMenu>
                        <h:message for="repeat" />
                        
                        <p:outputLabel for="untillDate" value="Untill:" />
                        <p:calendar id="untillDate" value="#{EventController.untillDate}" locale="it" navigator="true" pattern="dd-MM-yyyy" />
                        <h:message for="untillDate" />
                        
                        <p:outputLabel for="description" value="Description (optional):"/>
                        <p:inputTextarea id="description" rows="4" cols="35" value="#{EventController.event.description}" />
                        <h:message for="description" />
                        
                    </h:panelGrid>
                    
                    <br />                    
                    <div id="badConditions"> 
                        <p:outputLabel for="bad" value="Bad Conditions:"/>
                        <p:inputSwitch id="bad" value="#{EventController.bad}" onchange="show('badConditionsDiv')" />
                        <h:message for="bad" />
                    </div>
               
                    <br />
                    
                    <div id="badConditionsDiv" style="display: none">
                            
                        <!-- bad weather layer -->
                    
                        <h:panelGrid  cellpadding="20px" width="450px" columns="2">
                    
                            <p:outputLabel for="layer" value="Layer Type:"/>
                            <p:selectOneMenu id="layer" value="#{EventController.badconditions.layer}" style="width:100px">
                                <f:selectItem itemLabel="Rainy" itemValue="rainy" />
                                <f:selectItem itemLabel="Cloudy" itemValue="cloudy" />
                                <f:selectItem itemLabel="Snowy" itemValue="snowy" />
                            </p:selectOneMenu>
                            <h:message for="layer" />
                            
                        </h:panelGrid>
                        
                            <!-- bad weather advance setting -->
                        
                            <h:panelGrid style="bottom: 5px;top: 10px" cellpadding="20px" width="450px" columns="5">
                        
                            <p:selectBooleanCheckbox id="temperaturecheck" value="#{EventController.temp}" onchange="#{EventController.setTemp(!EventController.temp)}"/>
                            <h:outputText value="Temperature"/>
                            <h:outputText id="temperatureoutput" value="C #{EventController.badconditions.temperature}" />
                            <h:inputHidden id="temperature" value="#{EventController.badconditions.temperature}" />
                            <p:slider for="temperature" display="temperatureoutput" minValue="-20" maxValue="50" style="width: 200px" displayTemplate="{value} C" />
                            
                            <p:selectBooleanCheckbox id="precipitationscheck" value="#{EventController.prec}" onchange="#{EventController.setPrec(!EventController.prec)}"/>
                            <h:outputText value="Precipitations"/>
                            <h:outputText id="precipitationsoutput" value="% #{EventController.badconditions.precipitations}" />
                            <h:inputHidden id="precipitations" value="#{EventController.badconditions.precipitations}" />
                            <p:slider  for="precipitations" display="precipitationsoutput" style="width: 200px" displayTemplate="{value} %" />
    
                        </h:panelGrid>
                        
                    </div>
                    <br />
                    <br />
                    
                     
                    
                
                    <h:panelGrid columns="2"> 
                        <label for="invitationcheck"><input id="invitationcheck" type="checkbox" name="invitationcheck" onclick="enable('invitation')"/>
                        Send an Invitation to &nbsp;</label>
                        <f:ajax render="invitation" event="click" execute="invitationcheck"/>                      
                        <p:inputTextarea id="invitation" rows="4" cols="35" value="#{EventController.invitations}" disabled="true"/>
                    </h:panelGrid> 
                
                </div>

                <div id="weatherForm">
                    <h1> Weather Preview</h1>
                    
                    <h:graphicImage id="image" value="#{ImageChanger.image}"/>
                    
                    <h:panelGrid columns="2"> 
                        
                        <p:outputLabel for="color" value="Color Type:"/>
                        <p:selectOneMenu id="color" value="#{EventController.event.color}" style="width:100px">
                            <f:selectItem itemLabel="Grey" itemValue="grey" />
                            <f:selectItem itemLabel="Red" itemValue="red" />
                            <f:selectItem itemLabel="Pink" itemValue="pink" />
                            <f:selectItem itemLabel="Blue" itemValue="blue" />
                            <f:selectItem itemLabel="Green" itemValue="green" />
                        </p:selectOneMenu>
                        <h:message for="color" />

                        <p:outputLabel for="privacy" value="Set Event Privacy to:"/>
                        <p:selectOneMenu id="privacy" value="#{EventController.event.privacy}" style="width:100px">
                            <f:selectItem itemLabel="Private" itemValue="private" />
                            <f:selectItem itemLabel="Public" itemValue="public" />
                        </p:selectOneMenu>
                        <h:message for="privacy" />

                    </h:panelGrid>
              
                    <p:commandButton value="Create Event" action="#{EventController.prepareCreateEvent()}" id="iconOnly" icon="ui-icon-calendar"/>
                    
                </div> 
            </h:form>
        
            <!--Function to show element on click-->
            <script type="text/javascript" language="javascript">
                function show(id){
                  if (document.getElementById){
                    if(document.getElementById(id).style.display === 'none'){
                      document.getElementById(id).style.display = 'block';
                    }else{
                      document.getElementById(id).style.display = 'none';
                    }
                  }
                }
            </script>
            
             <!--Function to enable text-->
            <script type="text/javascript" language="javascript">
                
                function enable(id){
                  if (document.getElementById){
                    if(document.getElementById(id).disabled === true){
                      document.getElementById(id).disabled = false;
                    }else{
                      document.getElementById(id).disabled = true;
                    }
                  }
                }
            </script>
         
         
  

        <script language="javascript" type="text/javascript">
            <!--Function to load a page indicated with the string value.-->
            function loadPage(page, target) 
            {
                window.open(page, target);
            }
        </script>
    </body>
</html>
